{"version":3,"file":"app.min.js","sources":["../../node_modules/preact/dist/preact.module.js","../calendar-helpers.js","../Calendar.js","../Datepicker.js","../app.js"],"sourcesContent":["var n,l,u,t,i,r,o,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function h(n,l,u){var t,i,r,o,f=arguments;if(l=s({},l),arguments.length>3)for(u=[u],t=3;t<arguments.length;t++)u.push(f[t]);if(null!=u&&(l.children=u),null!=n&&null!=n.defaultProps)for(i in n.defaultProps)void 0===l[i]&&(l[i]=n.defaultProps[i]);return o=l.key,null!=(r=l.ref)&&delete l.ref,null!=o&&delete l.key,v(n,l,o,r)}function v(l,u,t,i){var r={type:l,props:u,key:t,ref:i,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return n.vnode&&n.vnode(r),r}function p(){return{}}function d(n){return n.children}function y(n){if(null==n||\"boolean\"==typeof n)return null;if(\"string\"==typeof n||\"number\"==typeof n)return v(null,n,null,null);if(null!=n.__e||null!=n.__c){var l=v(n.type,n.props,n.key,null);return l.__e=n.__e,l}return n}function m(n,l){this.props=n,this.context=l}function w(n,l){if(null==l)return n.__p?w(n.__p,n.__p.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?w(n):null}function g(n){var l,u;if(null!=(n=n.__p)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return g(n)}}function k(l){(!l.__d&&(l.__d=!0)&&1===u.push(l)||i!==n.debounceRendering)&&(i=n.debounceRendering,(n.debounceRendering||t)(_))}function _(){var n,l,t,i,r,o,f,e;for(u.sort(function(n,l){return l.__v.__b-n.__v.__b});n=u.pop();)n.__d&&(t=void 0,i=void 0,o=(r=(l=n).__v).__e,f=l.__P,e=l.u,l.u=!1,f&&(t=[],i=$(f,r,s({},r),l.__n,void 0!==f.ownerSVGElement,null,t,e,null==o?w(r):o),j(t,r),i!=o&&g(r)))}function b(n,l,u,t,i,r,o,c,s){var h,v,p,d,y,m,g,k=u&&u.__k||e,_=k.length;if(c==f&&(c=null!=r?r[0]:_?w(u,0):null),h=0,l.__k=x(l.__k,function(u){if(null!=u){if(u.__p=l,u.__b=l.__b+1,null===(p=k[h])||p&&u.key==p.key&&u.type===p.type)k[h]=void 0;else for(v=0;v<_;v++){if((p=k[v])&&u.key==p.key&&u.type===p.type){k[v]=void 0;break}p=null}if(d=$(n,u,p=p||f,t,i,r,o,null,c,s),(v=u.ref)&&p.ref!=v&&(g||(g=[])).push(v,u.__c||d,u),null!=d){if(null==m&&(m=d),null!=u.l)d=u.l,u.l=null;else if(r==p||d!=c||null==d.parentNode){n:if(null==c||c.parentNode!==n)n.appendChild(d);else{for(y=c,v=0;(y=y.nextSibling)&&v<_;v+=2)if(y==d)break n;n.insertBefore(d,c)}\"option\"==l.type&&(n.value=\"\")}c=d.nextSibling,\"function\"==typeof l.type&&(l.l=d)}}return h++,u}),l.__e=m,null!=r&&\"function\"!=typeof l.type)for(h=r.length;h--;)null!=r[h]&&a(r[h]);for(h=_;h--;)null!=k[h]&&D(k[h],k[h]);if(g)for(h=0;h<g.length;h++)A(g[h],g[++h],g[++h])}function x(n,l,u){if(null==u&&(u=[]),null==n||\"boolean\"==typeof n)l&&u.push(l(null));else if(Array.isArray(n))for(var t=0;t<n.length;t++)x(n[t],l,u);else u.push(l?l(y(n)):n);return u}function C(n,l,u,t,i){var r;for(r in u)r in l||N(n,r,null,u[r],t);for(r in l)i&&\"function\"!=typeof l[r]||\"value\"===r||\"checked\"===r||u[r]===l[r]||N(n,r,l[r],u[r],t)}function P(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=\"number\"==typeof u&&!1===c.test(l)?u+\"px\":null==u?\"\":u}function N(n,l,u,t,i){var r,o,f,e,c;if(\"key\"===(l=i?\"className\"===l?\"class\":l:\"class\"===l?\"className\":l)||\"children\"===l);else if(\"style\"===l)if(r=n.style,\"string\"==typeof u)r.cssText=u;else{if(\"string\"==typeof t&&(r.cssText=\"\",t=null),t)for(o in t)u&&o in u||P(r,o,\"\");if(u)for(f in u)t&&u[f]===t[f]||P(r,f,u[f])}else\"o\"===l[0]&&\"n\"===l[1]?(e=l!==(l=l.replace(/Capture$/,\"\")),c=l.toLowerCase(),l=(c in n?c:l).slice(2),u?(t||n.addEventListener(l,T,e),(n.t||(n.t={}))[l]=u):n.removeEventListener(l,T,e)):\"list\"!==l&&\"tagName\"!==l&&\"form\"!==l&&!i&&l in n?n[l]=null==u?\"\":u:\"function\"!=typeof u&&\"dangerouslySetInnerHTML\"!==l&&(l!==(l=l.replace(/^xlink:?/,\"\"))?null==u||!1===u?n.removeAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase()):n.setAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase(),u):null==u||!1===u?n.removeAttribute(l):n.setAttribute(l,u))}function T(l){return this.t[l.type](n.event?n.event(l):l)}function $(l,u,t,i,r,o,f,e,c,a){var h,v,p,y,w,g,k,_,C,P,N=u.type;if(void 0!==u.constructor)return null;(h=n.__b)&&h(u);try{n:if(\"function\"==typeof N){if(_=u.props,C=(h=N.contextType)&&i[h.__c],P=h?C?C.props.value:h.__p:i,t.__c?k=(v=u.__c=t.__c).__p=v.__E:(\"prototype\"in N&&N.prototype.render?u.__c=v=new N(_,P):(u.__c=v=new m(_,P),v.constructor=N,v.render=H),C&&C.sub(v),v.props=_,v.state||(v.state={}),v.context=P,v.__n=i,p=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=N.getDerivedStateFromProps&&s(v.__s==v.state?v.__s=s({},v.__s):v.__s,N.getDerivedStateFromProps(_,v.__s)),p)null==N.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&f.push(v);else{if(null==N.getDerivedStateFromProps&&null==e&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(_,P),!e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(_,v.__s,P)){for(v.props=_,v.state=v.__s,v.__d=!1,v.__v=u,u.__e=null!=c?c!==t.__e?c:t.__e:null,u.__k=t.__k,h=0;h<u.__k.length;h++)u.__k[h]&&(u.__k[h].__p=u);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(_,v.__s,P)}for(y=v.props,w=v.state,v.context=P,v.props=_,v.state=v.__s,(h=n.__r)&&h(u),v.__d=!1,v.__v=u,v.__P=l,h=v.render(v.props,v.state,v.context),u.__k=x(null!=h&&h.type==d&&null==h.key?h.props.children:h),null!=v.getChildContext&&(i=s(s({},i),v.getChildContext())),p||null==v.getSnapshotBeforeUpdate||(g=v.getSnapshotBeforeUpdate(y,w)),b(l,u,t,i,r,o,f,c,a),v.base=u.__e;h=v.__h.pop();)v.__s&&(v.state=v.__s),h.call(v);p||null==y||null==v.componentDidUpdate||v.componentDidUpdate(y,w,g),k&&(v.__E=v.__p=null)}else u.__e=z(t.__e,u,t,i,r,o,f,a);(h=n.diffed)&&h(u)}catch(l){n.__e(l,u,t)}return u.__e}function j(l,u){for(var t;t=l.pop();)try{t.componentDidMount()}catch(l){n.__e(l,t.__v)}n.__c&&n.__c(u)}function z(n,l,u,t,i,r,o,c){var s,a,h,v,p=u.props,d=l.props;if(i=\"svg\"===l.type||i,null==n&&null!=r)for(s=0;s<r.length;s++)if(null!=(a=r[s])&&(null===l.type?3===a.nodeType:a.localName===l.type)){n=a,r[s]=null;break}if(null==n){if(null===l.type)return document.createTextNode(d);n=i?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type),r=null}return null===l.type?p!==d&&(null!=r&&(r[r.indexOf(n)]=null),n.data=d):l!==u&&(null!=r&&(r=e.slice.call(n.childNodes)),h=(p=u.props||f).dangerouslySetInnerHTML,v=d.dangerouslySetInnerHTML,c||(v||h)&&(v&&h&&v.__html==h.__html||(n.innerHTML=v&&v.__html||\"\")),C(n,d,p,i,c),l.__k=l.props.children,v||b(n,l,u,t,\"foreignObject\"!==l.type&&i,r,o,f,c),c||(\"value\"in d&&void 0!==d.value&&d.value!==n.value&&(n.value=null==d.value?\"\":d.value),\"checked\"in d&&void 0!==d.checked&&d.checked!==n.checked&&(n.checked=d.checked))),n}function A(l,u,t){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,t)}}function D(l,u,t){var i,r,o;if(n.unmount&&n.unmount(l),(i=l.ref)&&A(i,null,u),t||\"function\"==typeof l.type||(t=null!=(r=l.__e)),l.__e=l.l=null,null!=(i=l.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(l){n.__e(l,u)}i.base=i.__P=null}if(i=l.__k)for(o=0;o<i.length;o++)i[o]&&D(i[o],u,t);null!=r&&a(r)}function H(n,l,u){return this.constructor(n,u)}function I(l,u,t){var i,o,c;n.__p&&n.__p(l,u),o=(i=t===r)?null:t&&t.__k||u.__k,l=h(d,null,[l]),c=[],$(u,i?u.__k=l:(t||u).__k=l,o||f,f,void 0!==u.ownerSVGElement,t&&!i?[t]:o?null:e.slice.call(u.childNodes),c,!1,t||f,i),j(c,l)}function L(n,l){I(n,l,r)}function M(n,l){return l=s(s({},n.props),l),arguments.length>2&&(l.children=e.slice.call(arguments,2)),v(n.type,l,l.key||n.key,l.ref||n.ref)}function O(n){var l={},u={__c:\"__cC\"+o++,__p:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var t,i=this;return this.getChildContext||(t=[],this.getChildContext=function(){return l[u.__c]=i,l},this.shouldComponentUpdate=function(i){n.value!==i.value&&(l[u.__c].props.value=i.value,t.some(function(n){n.__P&&(n.context=i.value,k(n))}))},this.sub=function(n){t.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){t.splice(t.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Consumer.contextType=u,u}n={},l=function(n){return null!=n&&void 0===n.constructor},m.prototype.setState=function(n,l){var u=this.__s!==this.state&&this.__s||(this.__s=s({},this.state));(\"function\"!=typeof n||(n=n(u,this.props)))&&s(u,n),null!=n&&this.__v&&(this.u=!1,l&&this.__h.push(l),k(this))},m.prototype.forceUpdate=function(n){this.__v&&(n&&this.__h.push(n),this.u=!0,k(this))},m.prototype.render=d,u=[],t=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=n.debounceRendering,n.__e=function(n,l,u){for(var t;l=l.__p;)if((t=l.__c)&&!t.__p)try{if(t.constructor&&null!=t.constructor.getDerivedStateFromError)t.setState(t.constructor.getDerivedStateFromError(n));else{if(null==t.componentDidCatch)continue;t.componentDidCatch(n)}return k(t.__E=t)}catch(l){n=l}throw n},r=f,o=0;export{I as render,L as hydrate,h as createElement,h,d as Fragment,p as createRef,l as isValidElement,m as Component,M as cloneElement,O as createContext,x as toChildArray,D as _unmount,n as options};\n//# sourceMappingURL=preact.module.js.map\n","// (int) The current year\nexport const THIS_YEAR = new Date().getFullYear();\n\n// (int) The current month starting from 1 - 12\n// 1 => January, 12 => December\n// getMonth() is zero-based value: Jan is 0, Dec is 11. so we plus '1'- Jan is 1, Dec is 12\nexport const THIS_MONTH = new Date().getMonth() + 1;\n\n// Week days names and shortnames\nexport const WEEK_DAYS = [...Array(7).keys()].map(d =>\n  new Date(2017, 9, d + 1).toLocaleString(undefined, { weekday: \"short\" })\n);\n\n// Calendar months names and shortnames\nexport const CALENDAR_MONTHS = [...Array(12).keys()].map(d =>\n  new Date(2017, d, 1).toLocaleString(undefined, { month: \"long\" })\n);\n\n// Weeks displayed on calendar\nexport const CALENDAR_WEEKS = 5;\n\n// Pads a string value with leading zeroes(0) until length is reached\n// For example: zeroPad(5, 2) => \"05\"\nexport const zeroPad = (value, length) => `${value}`.padStart(length, \"0\");\n\n// (int) Number days in a month for a given year from 28 - 31\nexport const getNumOfDaysInGivenMonth = (\n  month = THIS_MONTH,\n  year = THIS_YEAR\n) => {\n  const months30 = [4, 6, 9, 11];\n  const leapYear = year % 4 === 0;\n\n  // eslint-disable-next-line no-nested-ternary\n  return month === 2\n    ? leapYear\n      ? 29\n      : 28\n    : months30.includes(month)\n    ? 30\n    : 31;\n};\n\n// (int) First day of the month for a given year from 1 - 7\n// 1 => Sunday, 7 => Saturday\n// getDay() is zero-based value: Sun is 0, Sat is 6. so we plus '1'- Sun is 1, Sat is 7\nexport const getFirstDayOfTheMonth = (month = THIS_MONTH, year = THIS_YEAR) =>\n  new Date(`${year}-${zeroPad(month, 2)}-01`).getDay() + 1;\n\n// (bool) Checks if a value is a date - this is just a simple check\nexport const isDate = date => {\n  const isDateObj = Object.prototype.toString.call(date) === \"[object Date]\";\n  const isValidDate = date && !Number.isNaN(date.valueOf());\n\n  return isDateObj && isValidDate;\n};\n\n// (bool) Checks if two date values are of the same month and year\nexport const isSameMonth = (date, basedate = new Date()) => {\n  if (!(isDate(date) && isDate(basedate))) return false;\n\n  const basedateMonth = basedate.getMonth() + 1;\n  const basedateYear = basedate.getFullYear();\n\n  const dateMonth = date.getMonth() + 1;\n  const dateYear = date.getFullYear();\n\n  return basedateMonth === dateMonth && basedateYear === dateYear;\n};\n\n// (bool) Checks if two date values are the same day\nexport const isSameDay = (date, basedate) => {\n  if (!(isDate(date) && isDate(basedate)))\n    throw new Error(\"Value was not a Date object\");\n\n  const basedateDate = basedate.getDate();\n  const basedateMonth = basedate.getMonth() + 1;\n  const basedateYear = basedate.getFullYear();\n\n  const dateDate = date.getDate();\n  const dateMonth = date.getMonth() + 1;\n  const dateYear = date.getFullYear();\n\n  return (\n    basedateDate === dateDate &&\n    basedateMonth === dateMonth &&\n    basedateYear === dateYear\n  );\n};\n\n// (string) Formats the given date as YYYY-MM-DD\n// Months and Days are zero padded\nexport const getDateISO = (date = new Date()) => {\n  if (!isDate(date)) {\n    throw new Error(\n      \"Invalid date format. Please follow 'ISO 8601' format; 2013-08-30\"\n    );\n  }\n\n  return [\n    date.getFullYear(),\n    zeroPad(date.getMonth() + 1, 2),\n    zeroPad(date.getDate(), 2)\n  ].join(\"-\");\n};\n\n// ({month, year}) Gets the month and year before the given month and year\n// For example: getPreviousMonth(1, 2000) => {month: 12, year: 1999}\n// while: getPreviousMonth(12, 2000) => {month: 11, year: 2000}\nexport const getPreviousMonth = (month, year) => {\n  const prevMonth = month > 1 ? month - 1 : 12;\n  const prevMonthYear = month > 1 ? year : year - 1;\n\n  return { month: prevMonth, year: prevMonthYear };\n};\n\n// ({month, year}) Gets the month and year after the given month and year\n// For example: getNextMonth(1, 2000) => {month: 2, year: 2000}\n// while: getNextMonth(12, 2000) => {month: 1, year: 2001}\nexport const getNextMonth = (month, year) => {\n  const nextMonth = month < 12 ? month + 1 : 1;\n  const nextMonthYear = month < 12 ? year : year + 1;\n\n  return { month: nextMonth, year: nextMonthYear };\n};\n\n/**\n *  CALENDAR BUILDER\n *  For a month in the specified year.\n *  Returns an array of the calendar dates.\n *  Each calendar date is represented as an array => [YYYY, MM, DD]\n */\nexport default (month = THIS_MONTH, year = THIS_YEAR) => {\n  // Get number of days in the month and the month's first day\n  const monthDays = getNumOfDaysInGivenMonth(month, year);\n  const monthFirstDay = getFirstDayOfTheMonth(month, year);\n\n  // Get number of days to be displayed from previous and next months\n  // These ensure a total of 42 days (6 weeks) displayed on the calendar\n  const daysFromPrevMonth = monthFirstDay - 1;\n\n  const totalThisAndPrevMonthDays = daysFromPrevMonth + monthDays;\n  const fiveWeeks = CALENDAR_WEEKS * 7 - totalThisAndPrevMonthDays;\n  const sixWeeks = (CALENDAR_WEEKS + 1) * 7 - totalThisAndPrevMonthDays;\n\n  // if 'fiveWeeks' is -ve, means we need an additional row for the rest of the dates\n  const daysFromNextMonth = fiveWeeks < 0 ? sixWeeks : fiveWeeks;\n\n  // Get the previous and next months and years\n  const { month: prevMonth, year: prevMonthYear } = getPreviousMonth(\n    month,\n    year\n  );\n  const { month: nextMonth, year: nextMonthYear } = getNextMonth(month, year);\n\n  // Get number of days in previous month\n  const prevMonthDays = getNumOfDaysInGivenMonth(prevMonth, prevMonthYear);\n\n  // Builds dates to be displayed from previous month\n  const prevMonthDates = [...new Array(daysFromPrevMonth)].map((n, index) => {\n    const day = index + 1 + (prevMonthDays - daysFromPrevMonth);\n    return [prevMonthYear, zeroPad(prevMonth, 2), zeroPad(day, 2)];\n  });\n\n  // Builds dates to be displayed from current month\n  const thisMonthDates = [...new Array(monthDays)].map((n, index) => [\n    year,\n    zeroPad(month, 2),\n    zeroPad(index + 1, 2)\n  ]);\n\n  // Builds dates to be displayed from next month\n  const nextMonthDates = [...new Array(daysFromNextMonth)].map((n, index) => [\n    nextMonthYear,\n    zeroPad(nextMonth, 2),\n    zeroPad(index + 1, 2)\n  ]);\n\n  // Combines all dates from previous, current and next months\n  return [...prevMonthDates, ...thisMonthDates, ...nextMonthDates];\n};\n","import { h, Component } from \"preact\";\n\nimport calendar, {\n  isDate,\n  isSameDay,\n  isSameMonth,\n  getNextMonth,\n  getPreviousMonth,\n  WEEK_DAYS,\n  CALENDAR_MONTHS\n} from \"./calendar-helpers\";\n\nexport class Calendar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...this.resolveStateFromDate(props.date),\n      today: new Date()\n    };\n  }\n\n  componentWillUnmount() {\n    this.clearPressureTimer();\n  }\n\n  resolveStateFromDate = date => {\n    const d = isDate(date) ? date : new Date();\n\n    return {\n      current: d,\n      month: d.getMonth() + 1,\n      year: d.getFullYear()\n    };\n  };\n\n  getCalendarDates = () => {\n    const { current, month, year } = this.state;\n    const calendarMonth = month || current.getMonth() + 1;\n    const calendarYear = year || current.getFullYear();\n\n    return calendar(calendarMonth, calendarYear);\n  };\n\n  // Render the month and year header with arrow controls\n  // for navigating through months and years\n  renderMonthAndYear = () => {\n    const { month, year } = this.state;\n\n    // Resolve the month name from the CALENDAR_MONTHS object map\n    const monthname = CALENDAR_MONTHS[month - 1];\n\n    return (\n      <div class=\"monthPicker\">\n        <button\n          type=\"button\"\n          class=\"prevMonth\"\n          onMouseDown={this.handlePrevious}\n          onMouseUp={this.clearPressureTimer}\n          title=\"Previous Month\"\n        >\n          <span class=\"monthArrow\">&#8592;</span>\n        </button>\n        <div class=\"monthYearLabel\">\n          {monthname} {year}\n        </div>\n        <button\n          type=\"button\"\n          class=\"nextMonth\"\n          onMouseDown={this.handleNext}\n          onMouseUp={this.clearPressureTimer}\n          title=\"Next Month\"\n        >\n          <span class=\"monthArrow\">&#8594;</span>\n        </button>\n      </div>\n    );\n  };\n\n  // Render the label for day of the week\n  // This method is used as a map callback as seen in render()\n  renderDayLabels = () => (\n    // Resolve the day of the week label from the WEEK_DAYS object map\n    // const daylabel = WEEK_DAYS[day].toUpperCase();\n    <div class=\"dayLabels\">\n      {WEEK_DAYS.map(day => (\n        <div key={day} class=\"dayLabel\">\n          {day.toUpperCase()}\n        </div>\n      ))}\n    </div>\n  );\n\n  // Render a calendar date as returned from the calendar builder function\n  // This method is used as a map callback as seen in render()\n  renderCalendarDate = () => (\n    <div role=\"presentation\" class=\"dateLabels\" onMouseDown={this.gotoDate}>\n      {calendar(this.state.month, this.state.year).map((d, index) => {\n        const { current, month, year, today } = this.state;\n\n        const dateStr = d.join(\"-\");\n\n        const date = new Date(dateStr);\n\n        // Check if calendar date is same day as today\n        const isToday = isSameDay(date, today);\n\n        // Check if calendar date is same day as currently selected date\n        const isCurrent = isSameDay(date, current);\n\n        // Check if calendar date is in the same month as the state month and year\n        const inMonth = isSameMonth(date, new Date(`${year}-${month}-01`));\n\n        return (\n          <div\n            // eslint-disable-next-line react/no-array-index-key\n            key={`${year}-${month}-${index}`}\n            data-date={dateStr}\n            class={[\n              !inMonth && \"notInMonth\",\n              isCurrent && \"currentDay\",\n              isToday && \"today\",\n              \"dateLabel\"\n            ]\n              .filter(Boolean)\n              .join(\" \")}\n          >\n            {date.getDate()}\n          </div>\n        );\n      })}\n    </div>\n  );\n\n  gotoDate = e => {\n    // eslint-disable-next-line prefer-destructuring\n    const date = e.target.dataset.date;\n    const { onDateChanged } = this.props;\n\n    this.setState(this.resolveStateFromDate(new Date(date)));\n    typeof onDateChanged === \"function\" && onDateChanged(date);\n  };\n\n  gotoPreviousMonth = () =>\n    this.setState(prevState =>\n      getPreviousMonth(prevState.month, prevState.year)\n    );\n\n  gotoNextMonth = () =>\n    this.setState(prevState => getNextMonth(prevState.month, prevState.year));\n\n  gotoPreviousYear = () =>\n    this.setState(prevState => ({ year: prevState.year - 1 }));\n\n  gotoNextYear = () =>\n    this.setState(prevState => ({ year: prevState.year + 1 }));\n\n  // to simulate pressure clicking for rapidly cycling through months or years\n  handlePressure = fn => {\n    if (typeof fn !== \"function\") return;\n\n    fn();\n\n    this.pressureTimeout = setTimeout(() => {\n      this.pressureTimer = setInterval(fn, 100);\n    }, 500);\n  };\n\n  clearPressureTimer = () => {\n    this.pressureTimer && clearInterval(this.pressureTimer);\n    this.pressureTimeout && clearTimeout(this.pressureTimeout);\n  };\n\n  handlePrevious = evt =>\n    this.handlePressure(\n      evt.shiftKey ? this.gotoPreviousYear : this.gotoPreviousMonth\n    );\n\n  handleNext = evt =>\n    this.handlePressure(evt.shiftKey ? this.gotoNextYear : this.gotoNextMonth);\n\n  render() {\n    return (\n      <div class=\"calendar\">\n        {this.renderMonthAndYear()}\n        {this.renderDayLabels()}\n        {this.renderCalendarDate()}\n      </div>\n    );\n  }\n}\n","import { h, Component, createRef } from \"preact\";\n\nimport { Calendar } from \"./Calendar\";\nimport { getDateISO } from \"./calendar-helpers\";\nimport \"./Calendar.css\";\n\nexport class Datepicker extends Component {\n  state = { date: null, calendarOpen: false };\n\n  datepickerRef = createRef();\n\n  componentDidMount() {\n    const { value: date } = this.props;\n\n    if (!date) return;\n\n    this.setState({ date: getDateISO(new Date(date)) });\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.checkClickOutside);\n  }\n\n  checkClickOutside = e => {\n    if (this.datepickerRef.current) {\n      if (!this.datepickerRef.current.contains(e.target)) {\n        this.toggleCalendar();\n      }\n    }\n  };\n\n  toggleCalendar = () => {\n    this.setState(\n      prevState => ({ calendarOpen: !prevState.calendarOpen }),\n      () => {\n        if (this.state.calendarOpen) {\n          document.addEventListener(\"click\", this.checkClickOutside);\n        } else {\n          document.removeEventListener(\"click\", this.checkClickOutside);\n        }\n      }\n    );\n  };\n\n  handleDateChange = dateStr => {\n    const { onDateChanged, name } = this.props;\n    this.setState({ date: dateStr });\n    this.toggleCalendar();\n    typeof onDateChanged === \"function\" && onDateChanged(name, dateStr);\n  };\n\n  render({ label, placeholder, formatter = d => d }, { date, calendarOpen }) {\n    return (\n      <div ref={this.datepickerRef} class=\"dpd\" style=\"position:relative\">\n        {label && <label>{label}</label>}\n        <input\n          type=\"text\"\n          value={formatter(date)}\n          readOnly=\"readonly\"\n          placeholder={placeholder}\n          onClick={this.toggleCalendar}\n        />\n        {calendarOpen && (\n          <Calendar\n            date={date && new Date(date)}\n            onDateChanged={this.handleDateChange}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","import { h, Component, render } from \"preact\";\nimport { Datepicker } from \"./Datepicker\";\nimport { WEEK_DAYS } from \"./calendar-helpers\";\n\nfunction formatDate(dateStr) {\n  if (!dateStr) return;\n  const date = new Date(dateStr);\n  return `${WEEK_DAYS[date.getDay()]} ${date.getDate()}`;\n}\n\nclass DatepickerDate extends Component {\n  handleChange = (name, value) => {\n    document.getElementById(\"output\").textContent = `Output: ${value}`;\n  };\n\n  render() {\n    return (\n      <Datepicker\n        name=\"date\"\n        label=\"Label\"\n        value=\"2019-09-11\"\n        onDateChanged={this.handleChange}\n        formatter={formatDate}\n      />\n    );\n  }\n}\n\nrender(<DatepickerDate />, document.getElementById(\"root\"));\n"],"names":["n","u","t","i","r","f","e","c","s","l","a","parentNode","removeChild","h","o","arguments","length","push","children","defaultProps","key","ref","v","type","props","__k","__p","__b","__e","__c","constructor","vnode","d","m","this","context","w","indexOf","g","base","k","__d","debounceRendering","_","sort","__v","pop","__P","$","__n","ownerSVGElement","j","b","p","y","x","appendChild","nextSibling","insertBefore","value","D","A","Array","isArray","P","setProperty","test","N","style","cssText","replace","toLowerCase","slice","addEventListener","T","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","event","C","contextType","__E","prototype","render","H","sub","state","__h","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","__r","getChildContext","getSnapshotBeforeUpdate","call","componentDidUpdate","z","diffed","nodeType","localName","document","createTextNode","createElementNS","createElement","data","childNodes","dangerouslySetInnerHTML","__html","innerHTML","checked","current","unmount","componentWillUnmount","setState","forceUpdate","Promise","then","bind","resolve","setTimeout","getDerivedStateFromError","componentDidCatch","THIS_YEAR","Date","getFullYear","THIS_MONTH","getMonth","WEEK_DAYS","_toConsumableArray","keys","map","toLocaleString","undefined","weekday","CALENDAR_MONTHS","month","zeroPad","padStart","getNumOfDaysInGivenMonth","year","months30","leapYear","includes","getFirstDayOfTheMonth","getDay","isDate","date","isDateObj","Object","toString","isValidDate","Number","isNaN","valueOf","isSameMonth","basedate","basedateMonth","basedateYear","dateMonth","dateYear","isSameDay","Error","basedateDate","getDate","dateDate","getDateISO","join","getPreviousMonth","getNextMonth","monthDays","monthFirstDay","daysFromPrevMonth","totalThisAndPrevMonthDays","fiveWeeks","CALENDAR_WEEKS","sixWeeks","daysFromNextMonth","prevMonth","prevMonthYear","nextMonth","nextMonthYear","prevMonthDays","prevMonthDates","index","day","thisMonthDates","nextMonthDates","Calendar","_this","calendarMonth","calendarYear","calendar","monthname","onMouseDown","handlePrevious","onMouseUp","clearPressureTimer","title","handleNext","toUpperCase","role","gotoDate","today","dateStr","isToday","isCurrent","inMonth","filter","Boolean","target","dataset","onDateChanged","resolveStateFromDate","prevState","fn","pressureTimeout","pressureTimer","setInterval","clearInterval","clearTimeout","evt","handlePressure","shiftKey","gotoPreviousYear","gotoPreviousMonth","gotoNextYear","gotoNextMonth","renderMonthAndYear","renderDayLabels","renderCalendarDate","Component","Datepicker","calendarOpen","datepickerRef","contains","toggleCalendar","checkClickOutside","name","label","placeholder","formatter","readOnly","onClick","handleDateChange","formatDate","DatepickerDate","getElementById","textContent","handleChange"],"mappings":"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"}